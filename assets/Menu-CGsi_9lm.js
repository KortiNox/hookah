import{u as g,a as x,r as i,j as e,L as f,c as p,b as w,P as v,A as N,H as q,S as k}from"./index-D7VIEs1E.js";const S="_head_m9pnf_1",m={head:S},$="_head_1w0jq_1",y="_icon_1w0jq_11",E="_card_1w0jq_19",F="_footer_1w0jq_29",A="_name_1w0jq_35",I="_description_1w0jq_51",L="_price_1w0jq_67",P="_rating_1w0jq_87",b="_link_1w0jq_137",C="_added_1w0jq_145",M="_plus_1w0jq_163",a={head:$,icon:y,card:E,footer:F,name:A,description:I,price:L,rating:P,"add-to-card":"_add-to-card_1w0jq_109",link:b,added:C,plus:M};function D(s){const t=g(),r=x(c=>c.cart.items),[n,o]=i.useState(r.some(c=>c.id===s.id)),l=c=>{c.preventDefault(),n||(t(p.add(s.id)),o(!0))};return e.jsx(f,{to:`/hookah/product/${s.id}`,className:a.link,children:e.jsxs("div",{className:a.card,children:[e.jsxs("div",{className:a.head,style:{backgroundImage:`url('${s.image}')`},children:[e.jsx("div",{className:a.price,children:s.price}),e.jsx("button",{className:`${a["add-to-card"]} ${n?a.added:""}`,onClick:l,children:n?"Добавлено в закладки":e.jsx("div",{className:a.plus,children:"+"})}),e.jsxs("div",{className:a.rating,children:[s.rating," ",e.jsx("img",{src:"star-icon.svg",alt:"Рейтинг",className:a.icon})]})]}),e.jsxs("div",{className:a.footer,children:[e.jsx("div",{className:a.name,children:s.name}),e.jsx("div",{className:a.description,children:s.description})]})]})})}const H="_wrapper_1xjis_1",R={wrapper:H};function X({products:s}){return e.jsx("div",{className:R.wrapper,children:s.map(t=>e.jsx(D,{id:t.id,name:t.name,description:t.description.join(", "),rating:t.rating,price:t.price,image:t.image},t.id))})}function B(){const[s,t]=i.useState([]),[r,n]=i.useState(!1),[o,l]=i.useState(),[c,j]=i.useState();i.useEffect(()=>{u(c)},[c]);const u=async _=>{try{n(!0);const{data:d}=await w.get(`${v}/items`,{params:{name:_}});t(d),n(!1)}catch(d){console.error(d),d instanceof N&&(console.log(o),l(d.message)),n(!1);return}},h=_=>{j(_.target.value)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:m.head,children:[e.jsx(q,{children:"Миксы"}),e.jsx(k,{className:m.search,placeholder:"Введите микс",onChange:h})]}),e.jsxs("div",{children:[!r&&s.length>0&&e.jsx(X,{products:s}),r&&e.jsx(e.Fragment,{children:"Загрузка..."}),!r&&s.length===0&&e.jsx(e.Fragment,{children:"Не найдено 2"})]})]})}export{B as Menu,B as default};
